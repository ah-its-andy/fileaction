# Development/Debug Dockerfile for FileAction - Debian
# This image is designed for local development with hot-reload support
# Source code should be mounted as a volume

FROM golang:1.24-bullseye

LABEL maintainer="fileaction"
LABEL description="FileAction - Development Debian Image (supports source code mounting)"

# Install development tools and runtime dependencies
RUN apt-get update && apt-get install -y --no-install-recommends \
    git \
    make \
    curl \
    bash \
    # Development tools
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Create application directories
RUN mkdir -p /app/config /app/data /app/logs

WORKDIR /app

# Install air for hot-reload (optional)
RUN go install github.com/cosmtrek/air@latest

# Copy go.mod and go.sum first for better caching
# These will be overridden if source is mounted
COPY go.mod go.sum ./

# Download dependencies
RUN go mod download

# Note: config and source code should be mounted as volumes

# Expose port
EXPOSE 3000

# Default command: run the application with go run
# This allows for quick iteration without rebuilding
CMD ["go", "run", "main.go"]
